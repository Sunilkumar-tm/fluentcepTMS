{"version":3,"sources":["webpack:///src/app/folder/attendance-report/generate-report/generate-report.component.html","webpack:///src/app/folder/attendance-report/attendance-report-routing.module.ts","webpack:///src/app/folder/attendance-report/attendance-report.module.ts","webpack:///src/app/folder/attendance-report/attendance-report.service.ts","webpack:///src/app/folder/attendance-report/generate-report/generate-report.component.scss","webpack:///src/app/folder/attendance-report/generate-report/generate-report.component.ts"],"names":["routes","path","component","AttendanceReportRoutingModule","imports","forChild","exports","AttendanceReportModule","declarations","AttendanceReportService","http","storage","httpOptions","headers","window","localStorage","getItem","empId","firstDay","lastDay","get","url","map","Response","handleErrors","error","console","log","message","providedIn","GenerateReportComponent","repSer","slice","date","Date","getFullYear","getMonth","format","getReport","startDate","endDate","attenReport","subscribe","res","report","totalSpent","length","entireWorkDuration","err","errMsg","infiniteScrollEvent","setTimeout","target","complete","selector","template"],"mappings":"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","file":"attendance-report-attendance-report-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar  class=\\\"toolBar\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n          <ion-buttons slot=\\\"start\\\">\\n              <ion-menu-button></ion-menu-button>\\n          </ion-buttons>\\n          <!-- <ion-button class=\\\"btnHome\\\" [routerLink]=\\\"'/settings'\\\">\\n            <i class=\\\"fas fa-arrow-left\\\"></i> &nbsp;\\n          </ion-button> -->\\n      </ion-buttons>\\n    <ion-title>Attendance Report</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n          <ion-item>\\n              <ion-label position=\\\"floating\\\">Start Date</ion-label>\\n              <ion-datetime displayFormat=\\\"MMM DD YYYY\\\" [(ngModel)]=\\\"firstDay\\\"  value=\\\"firstDay\\\" name=\\\"firstDate\\\" ngDefaultControl></ion-datetime>\\n          </ion-item>\\n         \\n      </ion-col>\\n      <ion-col>\\n          <ion-item>\\n              <ion-label position=\\\"floating\\\">End Date</ion-label>\\n              <ion-datetime displayFormat=\\\"MMM DD YYYY\\\" [(ngModel)]=\\\"lastDay\\\"  value=\\\"lastDay\\\" name=\\\"lastDay\\\"  ngDefaultControl></ion-datetime>\\n          </ion-item>          \\n      </ion-col>\\n      <ion-col>\\n      <ion-button type=\\\"button\\\" class=\\\"gen\\\" color=\\\"#00aaa0\\\" (click)=\\\"getReport()\\\">GENERATE</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <div class=\\\"tabHead\\\">Total Spent: &nbsp; {{totalSpent}}</div>\\n\\n  <ion-grid>\\n\\n      <ion-row class=\\\"tabHead\\\">\\n        <ion-col>Date</ion-col> <ion-col>Time</ion-col> <ion-col>Status</ion-col> <ion-col>Spent</ion-col>\\n      </ion-row>\\n\\n      <ion-row *ngFor=\\\"let ar of report | slice:0:slice\\\">\\n          <ion-col>\\n            {{ar.date | date}}\\n          </ion-col>\\n          <ion-col>\\n            {{ar.time}}\\n          </ion-col>\\n          <ion-col>\\n            {{ar.checkInOutString}}\\n          </ion-col>\\n          <ion-col>\\n              {{ar.spent}}\\n          </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n\\n    <ion-infinite-scroll (ionInfinite)=\\\"doInfinite($event)\\\">\\n        <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\"\\n        loadingText=\\\"Loading more dataâ€¦\\\"></ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n  \\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { GenerateReportComponent } from './generate-report/generate-report.component';\n\n\nconst routes: Routes = [\n  {\n    path: 'rep',\n    component: GenerateReportComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AttendanceReportRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AttendanceReportRoutingModule } from './attendance-report-routing.module';\nimport { GenerateReportComponent } from './generate-report/generate-report.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\n\n\n@NgModule({\n  declarations: [GenerateReportComponent],\n  imports: [\n    CommonModule,\n    AttendanceReportRoutingModule,\n    IonicModule,\n    FormsModule,\n    ReactiveFormsModule,\n  ]\n})\nexport class AttendanceReportModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport 'rxjs/add/operator/map'; \nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/observable/throw';\nimport 'rxjs/Observable';\nimport { environment } from 'src/environments/environment';\nimport { Storage } from '@ionic/storage';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AttendanceReportService {\n  httpOptions: { headers: HttpHeaders; };\n\n   constructor(private http: HttpClient,\n    private storage: Storage,\n    ) {\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type':  'application/json',\n        'Authorization': 'Bearer ' + <string>window.localStorage.getItem('token')\n      })\n    };\n  }\n\n\n  attenReport(empId, firstDay, lastDay){\n    return this.http.get(environment.url + 'attendance/gettimespentinoffice/' + empId + '/' + firstDay + '/' + lastDay + '/all', this.httpOptions)\n    .map(Response =>\n      {return Response}).catch(this.handleErrors);\n  }\n\n  private handleErrors (error: Response | any) {\n    console.log(error.error.message)\n    return Observable.throw(error.error.message || 'backend server error');\n  }\n}\n\n\n","export default \"ion-title {\\n  color: white !important;\\n}\\n\\n.gen {\\n  color: black;\\n  background: #ddd;\\n}\\n\\n.tabHead {\\n  background: #006495;\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9sZGVyL2F0dGVuZGFuY2UtcmVwb3J0L2dlbmVyYXRlLXJlcG9ydC9FOlxcQ0VQXFxGbHVlbnRNV01fQ0VQX3Rtcy9zcmNcXGFwcFxcZm9sZGVyXFxhdHRlbmRhbmNlLXJlcG9ydFxcZ2VuZXJhdGUtcmVwb3J0XFxnZW5lcmF0ZS1yZXBvcnQuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2ZvbGRlci9hdHRlbmRhbmNlLXJlcG9ydC9nZW5lcmF0ZS1yZXBvcnQvZ2VuZXJhdGUtcmVwb3J0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksdUJBQUE7QUNDSjs7QURHRTtFQUNJLFlBQUE7RUFDQSxnQkFBQTtBQ0FOOztBREdFO0VBQ0ksbUJBQUE7RUFDQSxZQUFBO0FDQU4iLCJmaWxlIjoic3JjL2FwcC9mb2xkZXIvYXR0ZW5kYW5jZS1yZXBvcnQvZ2VuZXJhdGUtcmVwb3J0L2dlbmVyYXRlLXJlcG9ydC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi10aXRsZXtcclxuICAgIGNvbG9yOndoaXRlICFpbXBvcnRhbnQ7XHJcblxyXG4gIH1cclxuXHJcbiAgLmdlbntcclxuICAgICAgY29sb3I6YmxhY2s7XHJcbiAgICAgIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgfVxyXG5cclxuICAudGFiSGVhZHtcclxuICAgICAgYmFja2dyb3VuZDogIzAwNjQ5NTtcclxuICAgICAgY29sb3I6d2hpdGU7XHJcbiAgfSIsImlvbi10aXRsZSB7XG4gIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xufVxuXG4uZ2VuIHtcbiAgY29sb3I6IGJsYWNrO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xufVxuXG4udGFiSGVhZCB7XG4gIGJhY2tncm91bmQ6ICMwMDY0OTU7XG4gIGNvbG9yOiB3aGl0ZTtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { AttendanceReportService } from '../attendance-report.service';\nimport * as moment from 'moment'; \nimport { Storage } from '@ionic/storage';\n\n\n@Component({\n  selector: 'app-generate-report',\n  templateUrl: './generate-report.component.html',\n  styleUrls: ['./generate-report.component.scss'],\n})\nexport class GenerateReportComponent implements OnInit {\n  report: any;\n  errMsg: any;\n  totalSpent: any;\n  firstDay: any;\n  lastDay: any;\n  empId\n\n  constructor(\n    public repSer: AttendanceReportService,\n    private storage: Storage,\n  ) { }\n  \n//   ionViewWillEnter() {\n//     this.storage.get('loginDetails').then(detai => {\n//       console.log(detai.details.empId);\n//       this.empId = detai.details.empId\n//     });\n// }\n\n  ngOnInit() {\n    let date = new Date(); \n    this.firstDay =  moment(new Date(date.getFullYear(), date.getMonth(), 1)).format('YYYY-MM-DD'); \n    this.lastDay = moment(new Date(date.getFullYear(), date.getMonth() + 1, 0)).format('YYYY-MM-DD'); \n    this.getReport();\n  }\n\n  getReport(){\n    this.empId = window.localStorage.getItem('empId');\n    let startDate = moment(this.firstDay).format('YYYY-MM-DD'); \n    let endDate = moment(this.lastDay).format('YYYY-MM-DD'); \n\n    this.repSer.attenReport(this.empId, startDate, endDate).subscribe(res=>{\n      this.report = res['data']\n      this.totalSpent = this.report[this.report.length-1].entireWorkDuration\n    },err=>{\n      this.errMsg = err;\n    })\n  }\n\n  slice: number = 15;\n  doInfinite(infiniteScrollEvent) {\n    setTimeout(() => {\n      this.slice += 5;\n      infiniteScrollEvent.target.complete();\n    }, 500);\n  }\n\n}\n"]}